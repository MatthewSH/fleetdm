{
  "versions": [
    {
      "version": "2506-8.16.0-16536825094",
      "queries": {
        "exists": "SELECT 1 FROM apps WHERE bundle_identifier = 'com.omnissa.horizon.client.mac';"
      },
      "installer_url": "https://download3.omnissa.com/software/CART26FQ2_MAC_2506/Omnissa-Horizon-Client-2506-8.16.0-16536825094.dmg",
      "install_script_ref": "a14957f7",
      "uninstall_script_ref": "9aae4a77",
      "sha256": "45bb7a2ec1b309e9bf93ccda155ab78890c12eabe52cff3e57cd900662a100c0",
      "default_categories": [
        "Productivity"
      ]
    }
  ],
  "refs": {
    "9aae4a77": "#!/bin/sh\n\nquit_application() {\n  local bundle_id=\"$1\"\n  local timeout_duration=10\n  if ! osascript -e \"application id \\\"$bundle_id\\\" is running\" \u003e/dev/null 2\u003e\u00261; then return; fi\n  local console_user; console_user=$(stat -f \"%Su\" /dev/console)\n  if [[ $EUID -eq 0 \u0026\u0026 \"$console_user\" == \"root\" ]]; then return; fi\n  SECONDS=0\n  while (( SECONDS \u003c timeout_duration )); do\n    osascript -e \"tell application id \\\"$bundle_id\\\" to quit\" \u003e/dev/null 2\u003e\u00261 || true\n    if ! pgrep -f \"$bundle_id\" \u003e/dev/null 2\u003e\u00261; then break; fi\n    sleep 1\n  done\n}\n\nBUNDLE_ID=\"com.omnissa.horizon.client.mac\"\nquit_application \"$BUNDLE_ID\"\n\nrm -rf \"/Applications/Omnissa Horizon Client.app\" \\\n       \"/Applications/VMware Horizon Client.app\" \u003e/dev/null 2\u003e\u00261 || true\n\nif [[ -f \"/Library/LaunchDaemons/com.omnissa.horizon.CDSHelper.plist\" ]]; then\n  launchctl bootout system \"/Library/LaunchDaemons/com.omnissa.horizon.CDSHelper.plist\" \u003e/dev/null 2\u003e\u00261 || \\\n  launchctl unload -w \"/Library/LaunchDaemons/com.omnissa.horizon.CDSHelper.plist\" \u003e/dev/null 2\u003e\u00261 || true\nfi\nrm -f \"/Library/LaunchDaemons/com.omnissa.horizon.CDSHelper.plist\" \u003e/dev/null 2\u003e\u00261 || true\nrm -f \"/Library/PrivilegedHelperTools/com.omnissa.horizon.CDSHelper\" \u003e/dev/null 2\u003e\u00261 || true\n\nrm -rf \"/Library/Application Support/WorkspaceONE/helper\" \u003e/dev/null 2\u003e\u00261 || true\nrm -rf \"/Library/Application Support/Omnissa\" \u003e/dev/null 2\u003e\u00261 || true\nrm -f  \"/Library/Preferences/${BUNDLE_ID}.plist\" \u003e/dev/null 2\u003e\u00261 || true\nrm -f  /var/db/receipts/com.omnissa.horizon*.{bom,plist} \u003e/dev/null 2\u003e\u00261 || true\nrm -f  /var/db/receipts/com.vmware.horizon*.{bom,plist} \u003e/dev/null 2\u003e\u00261 || true\n\nfor udir in /Users/* /var/root; do\n  [[ -d \"$udir/Library\" ]] || continue\n  rm -rf \"$udir/Library/Application Support/VMware Horizon Client\" \\\n         \"$udir/Library/Application Support/Omnissa Horizon Client\" \\\n         \"$udir/Library/Caches/${BUNDLE_ID}\" \\\n         \"$udir/Library/Logs/VMware Horizon Client\" \\\n         \"$udir/Library/Logs/Omnissa Horizon Client\" \u003e/dev/null 2\u003e\u00261 || true\n  rm -f  \"$udir/Library/Preferences/${BUNDLE_ID}.plist\" \u003e/dev/null 2\u003e\u00261 || true\ndone\n\necho \"omnissa horizon client uninstalled\"\n",
    "a14957f7": "#!/bin/sh\n\nquit_application() {\n  local bundle_id=\"$1\"\n  local timeout_duration=10\n  if ! osascript -e \"application id \\\"$bundle_id\\\" is running\" \u003e/dev/null 2\u003e\u00261; then return; fi\n  local console_user; console_user=$(stat -f \"%Su\" /dev/console)\n  if [ \"$EUID\" -eq 0 ] \u0026\u0026 [ \"$console_user\" = \"root\" ]; then echo \"Skipping quit for '$bundle_id'.\"; return; fi\n  echo \"Quitting '$bundle_id'...\"\n  SECONDS=0\n  while [ \"$SECONDS\" -lt \"$timeout_duration\" ]; do\n    osascript -e \"tell application id \\\"$bundle_id\\\" to quit\" \u003e/dev/null 2\u003e\u00261 || true\n    if ! pgrep -f \"$bundle_id\" \u003e/dev/null 2\u003e\u00261; then echo \"'$bundle_id' quit successfully.\"; return; fi\n    sleep 1\n  done\n  echo \"'$bundle_id' did not quit.\"\n}\n\n[ -n \"$INSTALLER_PATH\" ] \u0026\u0026 [ -f \"$INSTALLER_PATH\" ] || { echo \"missing installer\"; exit 1; }\n\nquit_application \"com.omnissa.horizon.client.mac\"\n\n# Mount to a known temp directory to avoid space-in-path issues\nMOUNT_POINT=\"$(mktemp -d \"/tmp/omnissa_hzn.XXXXXX\")\"\n# hdiutil needs the directory to exist; mktemp already created it\nif ! hdiutil attach -nobrowse -readonly -mountpoint \"$MOUNT_POINT\" \"$INSTALLER_PATH\" \u003e/dev/null 2\u003e\u00261; then\n  rmdir \"$MOUNT_POINT\" \u003e/dev/null 2\u003e\u00261 || true\n  echo \"failed to mount dmg\"\n  exit 1\nfi\n\n# Look for a pkg (or mpkg) up to a few levels deep\nPKG=\"$(/usr/bin/find \"$MOUNT_POINT\" -maxdepth 5 -type f \\( -name \"*.pkg\" -o -name \"*.mpkg\" \\) -print -quit)\"\n\nif [ ! -f \"$PKG\" ]; then\n  hdiutil detach \"$MOUNT_POINT\" \u003e/dev/null 2\u003e\u00261 || true\n  echo \"pkg not found\"\n  exit 1\nfi\n\n/usr/sbin/installer -pkg \"$PKG\" -target / \u003e/dev/null 2\u003e\u00261\n\nhdiutil detach \"$MOUNT_POINT\" \u003e/dev/null 2\u003e\u00261 || true\nrmdir \"$MOUNT_POINT\" \u003e/dev/null 2\u003e\u00261 || true\n\necho \"omnissa horizon client installed\"\n"
  }
}